# 影
光源に対してオブジェクトの影を別のオブジェクトに落とすことができます。影を落とすことで、リアリティーの向上につながります。

この機能を利用するには次のように4つの設定を行います。

1、レンダラーで影を有効に設定する<br>
2、光源の影を有効にする<br>
3、影を落としたいMeshオブジェクトを設定する<br>
4、影を受けるMeshオブジェクトを設定する<br>

ここで注意する必要があるのは「影を落とす」と「影を受ける」の2点です。それぞれcastShadowプロパティー（影を落とす属性）とreceiveShadowプロパティー（影を受ける属性）をそれぞれ設定します。

[https://threejs.org/docs/#api/en/lights/shadows/LightShadow](https://threejs.org/docs/#api/en/lights/shadows/LightShadow)

## 影の解像度
影の解像度はデフォルトだと低く設定されているため（デフォルトは512）影が汚くみえることがあります。その場合は、光源のshadow.mapSize.widthとshadow.mapSize.heightプロパティーの大きさを調整します。これは2の累乗の値を使います。

512だとぼわっとなる。

```js
light.shadow.mapSize.width = 2048;
light.shadow.mapSize.height = 2048;
```

## 影の表現
3Dにおける影の表現には2種類あります。1つはもともとテクスチャに静的に作成しておくベイクという方法、もうひとつは動的に影を計算して適用する方法です。

前者は3Dのモデリングソフトなどで焼きこみ（影となる暗い部分）を作ることでクオリティー向上ができるうえに、計算量を少なくできるので高速化にもつながります。Flash時代から使われていた高速化の1つです。

たいして、後者の動的に影を作るのは計算量が高く（シャドウマップのサイズの関係で）十分な精度を得ることはできませんが、光源の位置によって影の位置を変更することができるので、自由度が高い表現だと言えます。